<section id="huel-header-{{ section.id }}" class="huel-header">
  <!-- Top promo bar -->
  <div class="huel-header__topbar">
    <div class="huel-container huel-header__top-inner">
      <div class="huel-header__top-left">
        {% for block in section.blocks %}
          {% if block.type == 'promo' %}
            <span class="huel-header__promo">{{ block.settings.text }}</span>
          {% endif %}
        {% endfor %}
      </div>

      <div class="huel-header__top-right">
        <span class="huel-header__country">US</span>
      </div>
    </div>
  </div>

  <!-- Main header -->
  <header class="huel-header__main">
    <div class="huel-container huel-header__main-inner">
      <!-- Logo -->
      <a href="{{ routes.root_url }}" class="huel-header__logo">
        {{ section.settings.logo_text }}
      </a>

      <!-- Nav -->
      <nav class="huel-header__nav">
        {% for block in section.blocks %}
          {% if block.type == 'nav_link' %}
            <a class="huel-header__nav-link" href="{{ block.settings.url | default: '#' }}">
              {{ block.settings.label }}
              {% if block.settings.has_dropdown %}
                <span class="huel-header__chev">‚ñæ</span>
              {% endif %}
            </a>
          {% endif %}
        {% endfor %}

        {% if section.settings.green_btn_label != blank %}
          <a class="huel-header__green-btn" href="{{ section.settings.green_btn_url | default: '#' }}">
            {{ section.settings.green_btn_label }}
          </a>
        {% endif %}
      </nav>

      <!-- Right CTA + icons -->
      <div class="huel-header__right">
        {% if section.settings.pill_label != blank %}
          <a class="huel-header__pill" href="{{ section.settings.pill_url | default: '#' }}">
            <span class="huel-header__pill-dot"></span>
            {{ section.settings.pill_label }}
          </a>
        {% endif %}

        <button class="huel-header__icon" aria-label="Help">?</button>
        <button class="huel-header__icon" aria-label="Account">üë§</button>
        <a class="huel-header__icon" href="{{ routes.cart_url }}" aria-label="Cart">üõçÔ∏è</a>
      </div>
    </div>
  </header>

  <style>
    /* container */
    #huel-header-{{ section.id }} .huel-container{
      max-width: 1200px;
      margin: 0 auto;
      padding-left: 20px;
      padding-right: 20px;
    }

    /* top bar */
    #huel-header-{{ section.id }} .huel-header__topbar{
      background:#0b0b0b;
      color:#fff;
      font-size:12px;
      padding:10px 0;
    }

    #huel-header-{{ section.id }} .huel-header__top-inner{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:14px;
    }

    #huel-header-{{ section.id }} .huel-header__top-left{
      display:flex;
      gap:18px;
      flex-wrap:wrap;
      opacity:0.92;
    }

    #huel-header-{{ section.id }} .huel-header__promo{
      display:inline-flex;
      gap:8px;
      align-items:center;
      white-space:nowrap;
    }

    #huel-header-{{ section.id }} .huel-header__top-right{
      opacity:0.9;
      font-weight:600;
    }

    /* main header */
    #huel-header-{{ section.id }} .huel-header__main{
      background:#fff;
      border-bottom:1px solid rgba(0,0,0,0.08);
    }

    #huel-header-{{ section.id }} .huel-header__main-inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:20px;
      padding:14px 0;
    }

    #huel-header-{{ section.id }} .huel-header__logo{
      font-weight:900;
      font-size:26px;
      letter-spacing:-0.5px;
      text-decoration:none;
      color:#111;
    }

    #huel-header-{{ section.id }} .huel-header__nav{
      display:flex;
      align-items:center;
      gap:18px;
      flex:1;
      padding-left:20px;
    }

    #huel-header-{{ section.id }} .huel-header__nav-link{
      text-decoration:none;
      font-size:13px;
      font-weight:600;
      color:#222;
    }

    #huel-header-{{ section.id }} .huel-header__nav-link:hover{
      opacity:0.75;
    }

    #huel-header-{{ section.id }} .huel-header__chev{
      font-size:11px;
      margin-left:4px;
      opacity:0.8;
    }

    #huel-header-{{ section.id }} .huel-header__green-btn{
      background:#d8f5dc;
      color:#0b3b15;
      border-radius:6px;
      padding:6px 10px;
      text-decoration:none;
      font-size:12px;
      font-weight:800;
      border:1px solid rgba(0,0,0,0.08);
    }

    /* right side */
    #huel-header-{{ section.id }} .huel-header__right{
      display:flex;
      align-items:center;
      gap:10px;
    }

    #huel-header-{{ section.id }} .huel-header__pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#e7f7ea;
      border:1px solid rgba(0,0,0,0.10);
      text-decoration:none;
      font-size:12px;
      font-weight:700;
      color:#0b3b15;
      white-space:nowrap;
    }

    #huel-header-{{ section.id }} .huel-header__pill-dot{
      width:10px;
      height:10px;
      background:#34c759;
      border-radius:50%;
      display:inline-block;
    }

    #huel-header-{{ section.id }} .huel-header__icon{
      width:36px;
      height:36px;
      border-radius:999px;
      border:none;
      background:transparent;
      cursor:pointer;
      font-size:16px;
      display:grid;
      place-items:center;
    }

    #huel-header-{{ section.id }} .huel-header__icon:hover{
      background:rgba(0,0,0,0.05);
    }

    /* responsive */
    @media (max-width: 950px){
      #huel-header-{{ section.id }} .huel-header__nav{
        display:none;
      }
    }

    @media (max-width: 520px){
      #huel-header-{{ section.id }} .huel-header__pill{
        display:none;
      }
    }
  </style>
</section>

{% schema %}
{
  "name": "Huel Custom Header",
  "settings": [
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo text",
      "default": "Huel"
    },
    {
      "type": "text",
      "id": "green_btn_label",
      "label": "Green button label",
      "default": "Give 25%, Get 25%"
    },
    {
      "type": "url",
      "id": "green_btn_url",
      "label": "Green button link"
    },
    {
      "type": "text",
      "id": "pill_label",
      "label": "CTA pill label",
      "default": "Which Huel is right for you?"
    },
    {
      "type": "url",
      "id": "pill_url",
      "label": "CTA pill link"
    }
  ],
  "blocks": [
    {
      "type": "promo",
      "name": "Promo text",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Promo text",
          "default": "FREE SHIPPING $65+"
        }
      ]
    },
    {
      "type": "nav_link",
      "name": "Navigation link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Shop all"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link"
        },
        {
          "type": "checkbox",
          "id": "has_dropdown",
          "label": "Show dropdown arrow",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Huel Custom Header",
      "blocks": [
        { "type": "promo", "settings": { "text": "FREE SHIPPING $65+" } },
        { "type": "promo", "settings": { "text": "SUBSCRIBE AND SAVE 20%" } },
        { "type": "promo", "settings": { "text": "HSA/FSA ELIGIBLE: LEARN MORE" } },
        { "type": "promo", "settings": { "text": "GIVE 25% OFF, GET 25% OFF" } },

        { "type": "nav_link", "settings": { "label": "Shop all", "has_dropdown": true } },
        { "type": "nav_link", "settings": { "label": "Science", "has_dropdown": true } },
        { "type": "nav_link", "settings": { "label": "About", "has_dropdown": false } },
        { "type": "nav_link", "settings": { "label": "Why Huel?", "has_dropdown": false } },
        { "type": "nav_link", "settings": { "label": "Guides & Articles", "has_dropdown": false } }
      ]
    }
  ]
}
{% endschema %}